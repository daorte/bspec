/*
 * bspec - A JavaScript library for structuring business rules
 * @version v1.0.1
 * @author Grigoriy Chudnov <g.chudnov@gmail.com> (https://github.com/gchudnov)
 * @link https://github.com/gchudnov/bspec
 * @license MIT
 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,i.bspec=t()}}(function(){return function t(i,n,e){function r(s,u){if(!n[s]){if(!i[s]){var f="function"==typeof require&&require;if(!u&&f)return f(s,!0);if(o)return o(s,!0);var p=new Error("Cannot find module '"+s+"'");throw p.code="MODULE_NOT_FOUND",p}var c=n[s]={exports:{}};i[s][0].call(c.exports,function(t){var n=i[s][1][t];return r(n?n:t)},c,c.exports,t,i,n,e)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<e.length;s++)r(e[s]);return r}({1:[function(t,i,n){"use strict";var e=t("./detail/promise"),r=t("./detail/callback"),o=t("./detail/sync");i.exports.PromiseSpec=e,i.exports.CallbackSpec=r,i.exports.SyncSpec=o},{"./detail/callback":2,"./detail/promise":3,"./detail/sync":4}],2:[function(t,i,n){"use strict";function e(){return arguments.length?u.ensureSpec(arguments[0],e):void 0}function r(t,i){e.call(this),this.lhs=t,this.rhs=i}function o(t,i){e.call(this),this.lhs=t,this.rhs=i}function s(t){e.call(this),this.other=t}var u=t("./util");e.prototype.isSatisfiedBy=function(t,i){i(new Error("isSatisfiedBy not implemented"))},e.prototype.and=function(t){return t=u.ensureSpec(t,e),new r(this,t)},e.prototype.or=function(t){return t=u.ensureSpec(t,e),new o(this,t)},e.prototype.not=function(){return new s(this)},e.prototype.explain=function(){return u.functionName(this.constructor)},u.inherits(r,e),r.prototype.isSatisfiedBy=function(t,i){var n=this;n.lhs.isSatisfiedBy(t,function(e,r){return e?i(e):r?void n.rhs.isSatisfiedBy(t,function(t,n){return t?i(t):i(null,n)}):i(null,r)})},r.prototype.explain=function(){return"("+this.lhs.explain()+" AND "+this.rhs.explain()+")"},u.inherits(o,e),o.prototype.isSatisfiedBy=function(t,i){var n=this;n.lhs.isSatisfiedBy(t,function(e,r){return e?i(e):r?i(null,r):void n.rhs.isSatisfiedBy(t,function(t,n){return t?i(t):i(null,n)})})},o.prototype.explain=function(){return"("+this.lhs.explain()+" OR "+this.rhs.explain()+")"},u.inherits(s,e),s.prototype.isSatisfiedBy=function(t,i){this.other.isSatisfiedBy(t,function(t,n){return t?i(t):i(null,!n)})},s.prototype.explain=function(){return"(NOT "+this.other.explain()+")"},i.exports=e},{"./util":5}],3:[function(t,i,n){"use strict";function e(){return arguments.length?u.ensureSpec(arguments[0],e):void 0}function r(t,i){e.call(this),this.lhs=t,this.rhs=i}function o(t,i){e.call(this),this.lhs=t,this.rhs=i}function s(t){e.call(this),this.other=t}var u=t("./util");e.prototype.isSatisfiedBy=function(t){return Promise.reject(new Error("some error"))},e.prototype.and=function(t){return t=u.ensureSpec(t,e),new r(this,t)},e.prototype.or=function(t){return t=u.ensureSpec(t,e),new o(this,t)},e.prototype.not=function(){return new s(this)},e.prototype.explain=function(){return u.functionName(this.constructor)},u.inherits(r,e),r.prototype.isSatisfiedBy=function(t){return Promise.all([this.lhs.isSatisfiedBy(t),this.rhs.isSatisfiedBy(t)]).then(function(t){return t[0]&&t[1]})},r.prototype.explain=function(){return"("+this.lhs.explain()+" AND "+this.rhs.explain()+")"},u.inherits(o,e),o.prototype.isSatisfiedBy=function(t){return Promise.all([this.lhs.isSatisfiedBy(t),this.rhs.isSatisfiedBy(t)]).then(function(t){return t[0]||t[1]})},o.prototype.explain=function(){return"("+this.lhs.explain()+" OR "+this.rhs.explain()+")"},u.inherits(s,e),s.prototype.isSatisfiedBy=function(t){return Promise.resolve(this.other.isSatisfiedBy(t)).then(function(t){return!t})},s.prototype.explain=function(){return"(NOT "+this.other.explain()+")"},i.exports=e},{"./util":5}],4:[function(t,i,n){"use strict";function e(){return arguments.length?u.ensureSpec(arguments[0],e):void 0}function r(t,i){e.call(this),this.lhs=t,this.rhs=i}function o(t,i){e.call(this),this.lhs=t,this.rhs=i}function s(t){e.call(this),this.other=t}var u=t("./util");e.prototype.isSatisfiedBy=function(t){throw new Error("isSatisfiedBy not implemented")},e.prototype.and=function(t){return t=u.ensureSpec(t,e),new r(this,t)},e.prototype.or=function(t){return t=u.ensureSpec(t,e),new o(this,t)},e.prototype.not=function(){return new s(this)},e.prototype.explain=function(){return u.functionName(this.constructor)},u.inherits(r,e),r.prototype.isSatisfiedBy=function(t){return this.lhs.isSatisfiedBy(t)&&this.rhs.isSatisfiedBy(t)},r.prototype.explain=function(){return"("+this.lhs.explain()+" AND "+this.rhs.explain()+")"},u.inherits(o,e),o.prototype.isSatisfiedBy=function(t){return this.lhs.isSatisfiedBy(t)||this.rhs.isSatisfiedBy(t)},o.prototype.explain=function(){return"("+this.lhs.explain()+" OR "+this.rhs.explain()+")"},u.inherits(s,e),s.prototype.isSatisfiedBy=function(t){return!this.other.isSatisfiedBy(t)},s.prototype.explain=function(){return"(NOT "+this.other.explain()+")"},i.exports=e},{"./util":5}],5:[function(t,i,n){"use strict";function e(t){return t.name?t.name:t.toString().match(c)[1]}function r(t,i){t.super_=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}function o(t){return"function"==typeof t}function s(t){return null!==t&&"object"==typeof t}function u(t,i){return t&&(o(t)||s(t)&&"isSatisfiedBy"in t&&o(t.isSatisfiedBy)||t instanceof i)}function f(t,i){function n(){i.call(this)}return r(n,i),n.prototype.isSatisfiedBy="isSatisfiedBy"in t?t.isSatisfiedBy.bind(t):t,new n}function p(t,i){if(!u(t,i))throw new Error("invalid argument: must be a function, spec-like or a spec object");return t instanceof i?t:f(t,i)}n.functionName=e,n.inherits=r,n.ensureSpec=p;var c=/^\s*function\s*(\S*)\s*\(/},{}]},{},[1])(1)});
/*
 * bspec - A JavaScript library for structuring business rules
 * @version v0.11.0
 * @author Grigoriy Chudnov <g.chudnov@gmail.com> (https://github.com/gchudnov)
 * @link https://github.com/gchudnov/bspec
 * @license MIT
 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i;"undefined"!=typeof window?i=window:"undefined"!=typeof global?i=global:"undefined"!=typeof self&&(i=self),i.bspec=t()}}(function(){return function t(i,n,e){function r(o,u){if(!n[o]){if(!i[o]){var f="function"==typeof require&&require;if(!u&&f)return f(o,!0);if(s)return s(o,!0);var p=new Error("Cannot find module '"+o+"'");throw p.code="MODULE_NOT_FOUND",p}var c=n[o]={exports:{}};i[o][0].call(c.exports,function(t){var n=i[o][1][t];return r(n?n:t)},c,c.exports,t,i,n,e)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<e.length;o++)r(e[o]);return r}({1:[function(t,i){"use strict";var n=t("./detail/promise"),e=t("./detail/callback"),r=t("./detail/sync");i.exports.PromiseSpec=n,i.exports.CallbackSpec=e,i.exports.SyncSpec=r},{"./detail/callback":2,"./detail/promise":3,"./detail/sync":4}],2:[function(t,i){"use strict";function n(){return arguments.length?o.ensureSpec(arguments[0],n):void 0}function e(t,i){n.call(this),this.lhs=t,this.rhs=i}function r(t,i){n.call(this),this.lhs=t,this.rhs=i}function s(t){n.call(this),this.other=t}var o=t("./util");n.prototype.isSatisfiedBy=function(t,i){i(new Error("isSatisfiedBy not implemented"))},n.prototype.and=function(t){return t=o.ensureSpec(t,n),new e(this,t)},n.prototype.or=function(t){return t=o.ensureSpec(t,n),new r(this,t)},n.prototype.not=function(){return new s(this)},n.prototype.explain=function(){return o.functionName(this.constructor)},o.inherits(e,n),e.prototype.isSatisfiedBy=function(t,i){var n=this;n.lhs.isSatisfiedBy(t,function(e,r){return e?i(e):r?void n.rhs.isSatisfiedBy(t,function(t,n){return t?i(t):i(null,n)}):i(null,r)})},e.prototype.explain=function(){return"("+this.lhs.explain()+" AND "+this.rhs.explain()+")"},o.inherits(r,n),r.prototype.isSatisfiedBy=function(t,i){var n=this;n.lhs.isSatisfiedBy(t,function(e,r){return e?i(e):r?i(null,r):void n.rhs.isSatisfiedBy(t,function(t,n){return t?i(t):i(null,n)})})},r.prototype.explain=function(){return"("+this.lhs.explain()+" OR "+this.rhs.explain()+")"},o.inherits(s,n),s.prototype.isSatisfiedBy=function(t,i){this.other.isSatisfiedBy(t,function(t,n){return t?i(t):i(null,!n)})},s.prototype.explain=function(){return"(NOT "+this.other.explain()+")"},i.exports=n},{"./util":5}],3:[function(t,i){"use strict";function n(){return arguments.length?o.ensureSpec(arguments[0],n):void 0}function e(t,i){n.call(this),this.lhs=t,this.rhs=i}function r(t,i){n.call(this),this.lhs=t,this.rhs=i}function s(t){n.call(this),this.other=t}var o=t("./util");n.prototype.isSatisfiedBy=function(){return Promise.reject(new Error("some error"))},n.prototype.and=function(t){return t=o.ensureSpec(t,n),new e(this,t)},n.prototype.or=function(t){return t=o.ensureSpec(t,n),new r(this,t)},n.prototype.not=function(){return new s(this)},n.prototype.explain=function(){return o.functionName(this.constructor)},o.inherits(e,n),e.prototype.isSatisfiedBy=function(t){return Promise.all([this.lhs.isSatisfiedBy(t),this.rhs.isSatisfiedBy(t)]).then(function(t){return t[0]&&t[1]})},e.prototype.explain=function(){return"("+this.lhs.explain()+" AND "+this.rhs.explain()+")"},o.inherits(r,n),r.prototype.isSatisfiedBy=function(t){return Promise.all([this.lhs.isSatisfiedBy(t),this.rhs.isSatisfiedBy(t)]).then(function(t){return t[0]||t[1]})},r.prototype.explain=function(){return"("+this.lhs.explain()+" OR "+this.rhs.explain()+")"},o.inherits(s,n),s.prototype.isSatisfiedBy=function(t){return Promise.resolve(this.other.isSatisfiedBy(t)).then(function(t){return!t})},s.prototype.explain=function(){return"(NOT "+this.other.explain()+")"},i.exports=n},{"./util":5}],4:[function(t,i){"use strict";function n(){return arguments.length?o.ensureSpec(arguments[0],n):void 0}function e(t,i){n.call(this),this.lhs=t,this.rhs=i}function r(t,i){n.call(this),this.lhs=t,this.rhs=i}function s(t){n.call(this),this.other=t}var o=t("./util");n.prototype.isSatisfiedBy=function(){throw new Error("isSatisfiedBy not implemented")},n.prototype.and=function(t){return t=o.ensureSpec(t,n),new e(this,t)},n.prototype.or=function(t){return t=o.ensureSpec(t,n),new r(this,t)},n.prototype.not=function(){return new s(this)},n.prototype.explain=function(){return o.functionName(this.constructor)},o.inherits(e,n),e.prototype.isSatisfiedBy=function(t){return this.lhs.isSatisfiedBy(t)&&this.rhs.isSatisfiedBy(t)},e.prototype.explain=function(){return"("+this.lhs.explain()+" AND "+this.rhs.explain()+")"},o.inherits(r,n),r.prototype.isSatisfiedBy=function(t){return this.lhs.isSatisfiedBy(t)||this.rhs.isSatisfiedBy(t)},r.prototype.explain=function(){return"("+this.lhs.explain()+" OR "+this.rhs.explain()+")"},o.inherits(s,n),s.prototype.isSatisfiedBy=function(t){return!this.other.isSatisfiedBy(t)},s.prototype.explain=function(){return"(NOT "+this.other.explain()+")"},i.exports=n},{"./util":5}],5:[function(t,i,n){"use strict";function e(t){return t.name?t.name:t.toString().match(c)[1]}function r(t,i){t.super_=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}function s(t){return"function"==typeof t}function o(t){return null!==t&&"object"==typeof t}function u(t,i){return t&&(s(t)||o(t)&&"isSatisfiedBy"in t&&s(t.isSatisfiedBy)||t instanceof i)}function f(t,i){function n(){i.call(this)}return r(n,i),n.prototype.isSatisfiedBy="isSatisfiedBy"in t?t.isSatisfiedBy.bind(t):t,new n}function p(t,i){if(!u(t,i))throw new Error("invalid argument: must be a function, spec-like or a spec object");return t instanceof i?t:f(t,i)}n.functionName=e,n.inherits=r,n.ensureSpec=p;var c=/^\s*function\s*(\S*)\s*\(/},{}]},{},[1])(1)});